%$Id: config_nux.tex 145 2005-03-25 08:26:35Z myk $

\bghdr{images/fond-nux}



%\begin{center}
%\includegraphics{images/logo_Linux}
%\end{center}

\subsection{Configuration sous Linux}

\subsubsection{Configuration IP}
Quelle que soit ta distribution, il faut que tu décides d'un nom de
machine --- ton pseudo en général. Tu as également besoin de
conna\^itre ton adresse IP, l'adresse IP de ta passerelle (\emph{gateway}), ton masque de sous-réseau et ton adresse de diffusion (\emph{broadcast}).
Toutes les informations nécessaires se trouvent page
\pageref{calcul_ip}.

Bien sûr, l'ensemble des manipulations décrites ci-dessous doit se faire en tant que \emph{root}!


\paragraph{\distrib{Sous Gentoo}}
Tu dois d'abord configurer ta Gentoo pour utiliser le réseau de l'X, donc configure le réseau en statique avec ton adresse IP calculée précédemment, puis
configure la résolution DNS. Tu dois avoir ceci dans le fichier \file{/etc/resolv.conf} :
\noindent \cmdline{
search eleves.polytechnique.fr polytechnique.fr\\
nameserver 129.104.201.53\\
nameserver 129.104.201.52}

\label{gentoo_mirror} Pour pouvoir utiliser \app{emerge} à travers le serveur mandataire (\emph{proxy}) de l'école, il faut définir les variables d'environnement
ci-dessous dans le fichier \file{/etc/make.conf} :
\cmdline{http\_proxy=http://kuzh.polytechnique.fr:8080\\
ftp\_proxy=http://kuzh.polytechnique.fr:8080\\
no\_proxy=.eleves.polytechnique.fr\\
GENTOO\_MIRRORS="ftp://miroir.eleves.polytechnique.fr/gentoo http://gentoo.\linebreak{}osuosl.org/"\\
SYNC="rsync://rsync/gentoo-portage"}

Tu peux évidemment ajouter d'autres miroirs (séparés par des espaces) dans ta liste mais
\urllink{ftp://miroir} étant interne, il sera toujours beaucoup plus rapide que les autres. On te
conseille ici \urllink{http://gentoo.osuosl.org/} qui est un miroir très complet mais très lent.

\input{ubuntu.tex}

\subsubsection{Configuration antivirus}

{(elle est drôle celle-là hein ?)}


\subsubsection{Configuration du pare-feu}

La solution la plus simple pour se faire un \emph{firewall} sous linux est d'utiliser les \emph{iptables}. Pour ceci la première étape est
d'installer le paquet \app{iptables} pour ta distribution. Pour savoir comment configurer ton \emph{firewall} pour le réseau de l'X, consulte le Wikix.

\subsubsection{Configuration navigateur web}

\flimage{images/nux_firefox_icon}{0.12}{l} Le BR te conseille d'utiliser \app{Firefox} ou
\app{Konqueror} (le navigateur fourni par défaut avec KDE). Dans tous les cas, la seule
configuration à effectuer est celle du serveur mandataire. Pour \app{Firefox}, il suffit d'aller dans
\menu{\'Edition}, \menu{Préférences} et dans l'onglet \menu{Avancé}, puis de cliquer sur l'onglet
\menu{Réseau}, et enfin \menu{Paramètres de connexion} ; ensuite coche la case \menu{Adresse de
configuration automatique du proxy}, et rentre \urllink{http://frankiz/proxy.pac}.

Sous \app{Konqueror}, cela se trouve dans le menu \menu{Configuration}, \menu{Configurer Konqueror},
dans l'onglet \menu{Serveur mandataire}. \emph{Attention}: si tu ne configures pas le serveur mandataire dans Konqueror,
les logiciels KDE (\app{KGet}, \app{Adept},\dots) ne l'utiliseront pas!

\imagepos{images/nux_proxy_firefox}{0.33}{Configuration du serveur mandataire sous Firefox}{ht}

\pagebreak

\subsubsection{Configuration mail}

\flimage{images/nux_kmail_icon}{0.12}{l} Le client \emph{mail} le plus
utilisé est \app{Kmail}, mais il en existe bien sûr d'autres comme
\app{Thunderbird}. La configuration est semblable, quel que soit le
client que tu utilises.

Va dans \menu{Configuration}, \menu{Configurer Kmail}. Choisis la
rubrique \menu{Comptes}. Commence par créer un nouveau compte dans
l'onglet \menu{Réception des messages} en cliquant sur le bouton
\menu{Ajouter\ldots} et choisis le type POP3.


\noindent
  \begin{figure*}[!h]
    \begin{center}  
      \subfloat[Réception des messages]{ 
      \includegraphics[width=0.48\textwidth]{images/nux_config_kmail_pop} }
      \hspace{\stretch{1}}
      \subfloat[Envoi des messages]{ 
 		\includegraphics[width=0.48 \textwidth]{images/nux_config_kmail_smtp} }
         	 \caption{Configuration sous \app{Kmail}}
    \end{center}
  \end{figure*}


Utilise les paramètres suivants pour configurer l'onglet \menu{Général} :
\begin{description}
  \item[Nom] le nom du compte, par exemple : Mails Poly
  \item[Utilisateur] rentre le \emph{login} \server{poly} que t'a fourni la DSI à ton arrivée sur le plateau
  \item[Mot de passe] et là le mot de passe \server{poly}
  \item[Serveur] \server{poly.polytechnique.fr}
  \item[Port] 995
\end{description}
Ensuite, va dans l'onglet \menu{Extras} et coche la case
\menu{Utiliser SSL pour sécuriser les téléchargements}.

Maintenant, dans l'onglet \menu{Envoi des messages} clique sur le
bouton \menu{Ajouter\ldots}. Utilise les paramètres suivants pour le
configurer :
\begin{description}
  \item[Nom] le m\^eme nom de compte que précédemment
  \item[Serveur] \server{poly.polytechnique.fr}
  \item[Port] 25
\end{description}
Sinon, laisse toutes les cases décochées.

Tu peux aussi configurer l'accès à \app{l'annuaire LDAP} de l'école, sorte de carnet d'adresses en ligne qui contient les adresses \emph{mail} de tout le monde sur le campus. Pour ce faire, commence par ouvrir \menu{Outils}, \menu{Carnet d'adresses}, puis va dans \menu{Configuration}, \menu{Configurer kAdressBook}, \menu{Consultation LDAP}. Clique ensuite sur \menu{Ajouter un hôte}, et configure comme suit: \\
\smallskip
\begin{minipage}{0.48\textwidth}
\begin{description}
  \item[Hôte] \server{ldap.eleves.polytechnique.fr}
  \item[Port] 389
  \item[Version de LDAP] 3
\end{description}  
\end{minipage} 
\begin{minipage}{0.48\textwidth}
\begin{description}  
  \item[DN] \server{dc=ldap,dc=eleves,dc=polytechnique,dc=fr}
  \item[Sécurité] Non
  \item[Identification] Anonyme
\end{description}
\end{minipage} \\
Une fois revenu dans \menu{Configuration LDAP}, coche la case \server{ldap.eleves.polytechnique.fr}. Tu as maintenant accès à l'annuaire LDAP lors de la
rédaction de messages, avec tout au plus un redémarrage de \app{Kmail}. 
%
%\imagepos{images/nux_config_ldap}{0.55}{Configuration de l'annuaire LDAP sous Kmail}{pht}
%\imagepos{images/nux_config_knode}{0.45}{Configuration de Knode}{ht}
%
\noindent
  \begin{figure*}[!h]
    \begin{center}  
      \subfloat[Configuration de l'annuaire LDAP sous Kmail]{ 
      \includegraphics[width=0.48\textwidth]{images/nux_config_ldap}}
      \hspace{\stretch{1}}
      \subfloat[Configuration de Knode]{ 
 		\includegraphics[width=0.48 \textwidth]{images/nux_config_ldap} }
	\caption{Configurations LDAP et \emph{news}}
    \end{center}
 \end{figure*}



\subsubsection{Configuration \emph{news}}

\flimage{images/nux_knode_icon}{0.12}{l} Le client \emph{news} le plus utilisé est \app{Knode}. Parmi les autres clients \emph{news}, citons \app{Thunderbird} ou \app{slrn}. Ici aussi, la configuration est presque indépendante du logiciel choisi.


Sous \app{Knode}, c'est dans le menu \menu{Configuration}, puis \menu{Configurer Knode}. Va dans la rubrique \menu{Comptes, Forums de discussion} et
crée un compte en cliquant sur \menu{Ajouter\ldots}.

%\imagepos{images/nux_config_knode}{0.45}{Configuration de Knode}{ht}

Remplis l'onglet \menu{Serveur} avec les informations suivantes :
\begin{description}
  \item[Nom] ce que tu veux pour décrire ce compte, par exemple 'News Frankiz'
  \item[Serveur] \server{frankiz.polytechnique.fr}
\nopagebreak  \item[Port] 119
\end{description}


 
Ensuite occupe-toi de l'onglet \menu{Identité} :
\begin{description}
  \item[Nom] mets ton pseudo dans ce champ
  \item[Organisation] X, \'Ecole polytechnique, comme tu le sens
  \item[Adresse électronique] ton adresse \emph{mail}, pour que les gens puissent te répondre par \emph{mail}.
\end{description}

Enfin, pour que \app{Knode} puisse envoyer des \emph{mails}, il faut aller
dans la rubrique \menu{Comptes}, sous-rubrique \menu{Serveur de
courrier (SMTP)}, et choisir comme serveur d'envoi de \emph{mails}
\server{poly.polytechnique.fr}, port 25 --- c'est exactement la m\^eme
configuration SMTP que \app{Kmail}.

Si tu veux mettre une signature à la fin des messages que tu
posteras, il te suffit de la mettre dans l'onglet \menu{Identité}.
Sur la plupart des clients la signature est interprétée comme
extérieure au message et n'est en particulier pas incluse dans le
texte cité lorsque tu réponds à un message. Pour définir une
signature à la main, il suffit de mettre \verb*+-- +\ (c'est à dire
-{}-<espace>) sur une ligne, et tout ce qui suivra cette ligne
composera ta signature.

Il ne te reste plus qu'à t'inscrire à des \emph{newsgroups} (reporte-toi à la page \pageref{newsgroups} pour plus d'infos) et à poster !

Pour te connecter aux serveurs de \emph{news} de Polytechnique.org, qui ont un accès sécurisé, avec \app{Knode}, il y a une petite subtilité car il
ne gère pas le SSL. Il faut installer \app{stunnel} qui permet de définir une redirection SSL de port. Dans \file{/etc/stunnel.conf} ou
\file{/etc/stunnel/stunnel.conf} selon ta distribution, mets les lignes suivantes (les trois premières y sont en principe déjà) :
\cmdline{\# location of pid file\\
pid = /etc/stunnel/stunnel.pid\\
\\
\# user to run as\\
setuid = stunnel\\
setgid = stunnel\\
\\
\# Use it for client mode\\
client = yes\\
\\
\# sample service-level configuration\\
{[}nntps{]}\\
accept  = 1119\\
connect = ssl.polytechnique.org:563\\
TIMEOUTclose = 0
}

Il ne te reste plus qu'à lancer \app{stunnel} par :
\cmdline{/etc/init.d/stunnel start}

Et tu peux ainsi lire les \emph{news} de Polytechnique.org en mettant \server{localhost} comme serveur et
\server{1119} comme port. Il faut aussi que tu coches \menu{Le serveur exige une identification} et
que tu rentres ton nom d'utilisateur à Polytechnique.org et ton mot de passe, que tu peux définir
sur \urllink{http://www.polytechnique.org/acces\_smtp.php}.

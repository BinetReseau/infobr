%$Id: config_nux.tex 145 2005-03-25 08:26:35Z myk $

\clearpage
\pagebreak

\bghdr{images/fond-nux}

%\begin{center}
%\includegraphics{images/logo_Linux}
%\end{center}

\subsection{Configuration sous Linux}

\subsubsection{Configuration IP}
Quelle que soit ta distribution, il faut que tu d\'ecides d'un nom de
machine --- ton pseudo en g\'en\'eral. Tu as \'egalement besoin de
conna\^itre les informations suivantes :
\begin{description}
  \item [ton adresse IP] not\'ee dor\'enavant \server{129.104.AAA.BBB} ;
  \item [l'IP de ta passerelle (\emph{gateway})] not\'ee \server{129.104.GGG.CCC} ;
  \item [ton masque de sous-r\'eseau] \server{255.255.FFF.DDD} ;
  \item [ton broadcast] qui est de la forme \server{129.104.GGG.EEE} avec $EEE = 255 - DDD$. \\
        \textcolor{red}{(attention, $GGG = AAA$ n'est valable que dans les nouveaux caserts, le PEM et le BEM. Pour Foch, Fayolle et Maunoury ce n'est donc pas n\'ecessairement vrai que $GGG =
        AAA$.)}.
\end{description}

Toutes les informations n\'ecessaires se trouvent page
\pageref{calcul_ip}.

Bien s\^ur, l'ensemble des manipulations doit se faire en tant que \emph{root}.


\paragraph{\distrib{Sous Gentoo}}

Tu dois d'abord configurer ta Gentoo pour utiliser le r\'eseau de l'X, donc configure le réseau en statique avec ton adresse IP calcul\'ee pr\'ec\'edemment puis
configure la r\'esolution DNS, tu dois avoir ceci dans le fichier \file{/etc/resolv.conf} :

\noindent \cmdline{
domain eleves.polytechnique.fr\\
search eleves.polytechnique.fr polytechnique.fr\\
nameserver 129.104.201.53\\
namaserver 129.104.201.52}

\label{gentoo_mirror} Pour pouvoir utiliser \app{emerge} \`a travers le \emph{proxy} de l'\'ecole, il faut d\'efinir les variables d'environnement
ci-dessous dans le fichier \file{/etc/make.conf} :

\cmdline{http\_proxy=http://kuzh.polytechnique.fr:8080\\
ftp\_proxy=http://kuzh.polytechnique.fr:8080\\
no\_proxy=.eleves.polytechnique.fr\\
GENTOO\_MIRRORS="ftp://miroir.eleves.polytechnique.fr/gentoo http://gentoo.osuosl.org/"\\
SYNC="rsync://rsync/gentoo-portage"}

Tu peux \'evidemment ajouter d'autres miroirs (s\'epar\'es par des espaces) dans ta liste mais
\urllink{ftp://miroir} \'etant interne, il sera toujours beaucoup plus rapide que les autres. On te
conseille ici \urllink{http://gentoo.osuosl.org/} qui est un miroir tr\`es complet mais tr\`es lent.

\input{ubuntu.tex}

\subsubsection{Configuration antivirus}
\footnotesize{(elle est dr\^ole celle-l\`a hein ?)}

\subsubsection{Configuration du pare-feu}

La solution la plus simple pour se faire un \emph{firewall} sous linux est d'utiliser les \emph{iptables}. Pour ceci la premi\`ere \'etape est
d'installer le paquet \app{iptables} pour ta distribution. Pour savoir comment configurer ton \emph{firewall} pour le r\'eseau de l'X, consulte le Wikix.

\subsubsection{Configuration navigateur web}

\flimage{images/nux_firefox_icon}{0.12}{l} Le BR te conseille d'utiliser \app{Firefox} ou
\app{Konqueror} (le navigateur fourni par d\'efaut avec KDE). Dans tous les cas, la seule
configuration \`a effectuer est celle du \emph{proxy}. Pour \app{Firefox}, il suffit d'aller dans
\menu{Edit}, \menu{Preferences} et dans l'onglet \menu{Avanc\'e}, puis de cliquer sur l'onglet
\menu{R\'eseau}, et enfin \menu{Param\`etres de connexion} ; ensuite coche la case \menu{Adresse de
configuration automatique du proxy}, et rentre \urllink{http://frankiz/proxy.pac/}.

Sous \app{Konqueror}, cela se trouve dans le menu \menu{Configuration}, \menu{Configurer Konqueror},
dans l'onglet \menu{Serveur mandataire}. \emph{Attention}: si tu ne configures pas le proxy dans Konqueror,
les logiciels KDE (KGet, Adept, ...) n'utiliserons pas le proxy !!

\imagepos{images/nux_proxy_firefox}{0.35}{Configuration du proxy sous Firefox}{ht}

% \vfill
\pagebreak

\subsubsection{Configuration mail}

\flimage{images/nux_kmail_icon}{0.12}{l} Le client mail le plus
utilis\'e est \app{Kmail}, mais il en existe bien s\^ur d'autres comme
\app{Thunderbird}. La configuration est semblable, quel que soit le
client que tu utilises.

Va dans \menu{Configuration}, \menu{Configurer Kmail}. Choisis la
rubrique \menu{Comptes}. Commence par cr\'eer un nouveau compte dans
l'onglet \menu{R\'eception des messages} en cliquant sur le bouton
\menu{Ajouter\ldots} et choisis le type POP3.

\imagepos{images/nux_config_kmail_pop}{0.45}{Configuration de la r\'eception des messages sous Kmail}{pht}

Utilise les param\`etres suivants pour configurer l'onglet
\menu{G\'en\'eral} :
\begin{description}
  \item[Nom] le nom du compte, par exemple : Mails Poly
  \item[Utilisateur] rentre le login \server{poly} que t'a fourni la DSI \`a ton arriv\'ee sur le plateau
  \item[Mot de passe] et l\`a le mot de passe \server{poly}
  \item[Serveur] \server{poly.polytechnique.fr}
  \item[Port] 995
\end{description}

Ensuite, va dans l'onglet \menu{Extras} et coche la case
\menu{Utiliser SSL pour s\'ecuriser les t\'el\'echargements}.

\imagepos{images/nux_config_kmail_smtp}{0.45}{Configuration de l'envoi des messages sous Kmail}{pht}

Maintenant, dans l'onglet \menu{Envoi des messages} clique sur le
bouton \menu{Ajouter\ldots}. Utilise les param\`etres suivants pour le
configurer :
\begin{description}
  \item[Nom] le m\^eme nom de compte que pr\'ec\'edemment
  \item[Serveur] \server{poly.polytechnique.fr}
  \item[Port] 25
\end{description}
Sinon, laisse toutes les cases d\'ecoch\'ees.

\par Tu peux aussi configurer l'acc\`es \`a \app{l'annuaire LDAP} de l'\'ecole, sorte de carnet d'adresses en ligne qui contient les adresses mail de tout le monde sur le campus. Pour ce faire, commence par ouvrir \menu{Outils}, \menu{Carnet d'adresses}, puis va dans \menu{Configuration}, \menu{Configurer kAdressBook}, \menu{Consultation LDAP}. Clique ensuite sur \menu{Ajouter un h\^ote}, et configure comme suit:
\begin{description}
  \item[H\^ote] \server{ldap.eleves.polytechnique.fr}
  \item[Port] 389
  \item[Version de LDAP] 3
  \item[DN] dc=ldap,dc=eleves,dc=polytechnique,dc=fr
  \item[S\'ecurit\'e] Non
  \item[Identification] Anonyme
\end{description}
Une fois revenu dans \menu{Configuration LDAP}, coche la case \server{ldap.eleves.polytechnique.fr}. Tu as maintenant acc\`es au LDAP lors de la
r\'edaction de messages, avec tout au plus un red\'emarrage de \app{Kmail}. \imagepos{images/nux_config_ldap}{0.55}{Configuration de l'annuaire LDAP sous
Kmail}{pht}

\subsubsection{Configuration news}
\flimage{images/nux_knode_icon}{0.12}{l} Le client news le plus
utilis\'e est \app{Knode}. Parmi les autres clients news, citons
\app{Thunderbird} ou \app{slrn}. Ici aussi, la configuration est
presque ind\'ependante du logiciel choisi.

Sous \app{Knode}, c'est dans le menu \menu{Configuration}, puis \menu{Configurer Knode}. Va dans la rubrique \menu{Comptes, Forums de discussion} et
cr\'ee un compte en cliquant sur \menu{Ajouter\ldots}.

\imagepos{images/nux_config_knode}{0.45}{Configuration de Knode}{ht}

Remplis l'onglet \menu{Serveur} avec les informations suivantes :
\begin{description}
  \item[Nom] ce que tu veux pour d\'ecrire ce compte, par exemple 'News Frankiz'
  \item[Serveur] \server{frankiz.polytechnique.fr}
  \item[Port] 119
\end{description}
Ensuite occupe-toi de l'onglet \menu{Identit\'e} :
\begin{description}
  \item[Nom] mets ton pseudo dans ce champ
  \item[Organisation] X, \'ecole Polytechnique, comme tu le sens
  \item[Adresse \'electronique] ton adresse mail, pour que les gens puissent te r\'epondre par mail.
\end{description}

Enfin, pour que \app{Knode} puisse envoyer des mails, il faut aller
dans la rubrique \menu{Comptes}, sous-rubrique \menu{Serveur de
courrier (SMTP)}, et choisir comme serveur d'envoi de mails
\server{poly.polytechnique.fr}, port 25 --- c'est exactement la m\^eme
configuration SMTP que \app{Kmail}.

Si tu veux mettre une signature \`a la fin des messages que tu
posteras, il te suffit de la mettre dans l'onglet \menu{Identit\'e}.
Sur la plupart des clients la signature est interpr\'et\'ee comme
ext\'erieure au message et n'est en particulier pas incluse dans le
texte cit\'e lorsque tu r\'eponds \`a un message. Pour d\'efinir une
signature \`a la main, il suffit de mettre \verb*+-- +\ (c'est \`a dire
-{}-<espace>) sur une ligne, et tout ce qui suivra cette ligne
composera ta signature.

Il ne te reste plus qu'\`a t'inscrire \`a des \emph{newsgroups} (reporte-toi \`a la page \pageref{newsgroups} pour plus d'infos) et \`a poster !

Pour te connecter aux serveurs de \emph{news} de Polytechnique.org, qui ont un acc\`es s\'ecuris\'e, avec \app{Knode}, il y a une petite subtilit\'e car il
ne g\`ere pas le SSL. Il faut installer \app{stunnel} qui permet de d\'efinir une redirection SSL de port. Dans \file{/etc/stunnel.conf} ou
\file{/etc/stunnel/stunnel.conf} selon ta distribution, mets les lignes suivantes (les trois premi\`eres y sont en principe d\'ej\`a) :

\cmdline{\# location of pid file\\
pid = /etc/stunnel/stunnel.pid\\
\\
\# user to run as\\
setuid = stunnel\\
setgid = stunnel\\
\\
\# Use it for client mode\\
client = yes\\
\\
\# sample service-level configuration\\
\\
{[}nntps{]}\\
accept  = 1119\\
connect = ssl.polytechnique.org:563\\
TIMEOUTclose = 0
}

Il ne te reste plus qu'\`a lancer \app{stunnel} par :

\cmdline{/etc/init.d/stunnel start}

Et tu peux ainsi lire les news de Polytechnique.org en mettant \server{localhost} comme serveur et
\server{1119} comme port. Il faut aussi que tu coches \menu{Le serveur exige une identification} et
que tu rentres ton nom d'utilisateur \`a Polytechnique.org et ton mot de passe, que tu peux d\'efinir
sur \urllink{http://www.polytechnique.org/acces\_smtp.php}.
